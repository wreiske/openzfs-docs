

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>vdev_id.conf.5 &mdash; OpenZFS  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme_overrides.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/mandoc.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="zfs-events.5" href="zfs-events.5.html" />
    <link rel="prev" title="spl-module-parameters.5" href="spl-module-parameters.5.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #29667e" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/logo_main.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../Getting Started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Project and Community/index.html">Project and Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Developer Resources/index.html">Developer Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Performance and Tuning/index.html">Performance and Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Basic Concepts/index.html">Basic Concepts</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Man Pages</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../1/index.html">User Commands (1)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">File Formats and Conventions (5)</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="spl-module-parameters.5.html">spl-module-parameters.5</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">vdev_id.conf.5</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-events.5.html">zfs-events.5</a></li>
<li class="toctree-l3"><a class="reference internal" href="zfs-module-parameters.5.html">zfs-module-parameters.5</a></li>
<li class="toctree-l3"><a class="reference internal" href="zpool-features.5.html">zpool-features.5</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../8/index.html">System Administration Commands (8)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../msg/index.html">ZFS Messages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../License.html">License</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">OpenZFS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Man Pages</a> &raquo;</li>
        
          <li><a href="index.html">File Formats and Conventions (5)</a> &raquo;</li>
        
      <li>vdev_id.conf.5</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/openzfs/openzfs-docs/blob/master/docs/man/5/vdev_id.conf.5.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="vdev-id-conf-5">
<h1>vdev_id.conf.5<a class="headerlink" href="#vdev-id-conf-5" title="Permalink to this headline">Â¶</a></h1>
<div class="man_container"><table class="head">
  <tr>
    <td class="head-ltitle">VDEV_ID.CONF(5)</td>
    <td class="head-vol">File Formats Manual</td>
    <td class="head-rtitle">VDEV_ID.CONF(5)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<code class="Nm" title="Nm">vdev_id.conf</code> &#x2014;
<div class="Nd" title="Nd">Configuration file for vdev_id</div>
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<code class="Nm" title="Nm">vdev_id.conf</code> is the configuration file for
  <code class="Nm" title="Nm">vdev_id</code><b class="Sy" title="Sy">(8)</b>. It
  controls the default behavior of
  <code class="Nm" title="Nm">vdev_id</code><b class="Sy" title="Sy">(8)</b>
  while it is mapping a disk device name to an alias.
<div class="Pp"></div>
The <code class="Nm" title="Nm">vdev_id.conf</code> file uses a simple format
  consisting of a keyword followed by one or more values on a single line. Any
  line not beginning with a recognized keyword is ignored. Comments may
  optionally begin with a hash character.
<div class="Pp"></div>
The following keywords and values are used.
<dl class="Bl-tag">
  <dt><b class="Sy" title="Sy">alias</b> <var class="Ar" title="Ar">name</var>
    <var class="Ar" title="Ar">devlink</var></dt>
  <dd>Maps a device link in the <span class="Pa" title="Pa">/dev</span>
      directory hierarchy to a new device name. The udev rule defining the
      device link must have run prior to
      <code class="Nm" title="Nm">vdev_id</code><b class="Sy" title="Sy">(8)</b>.
      A defined alias takes precedence over a topology-derived name, but the two
      naming methods can otherwise coexist. For example, one might name drives
      in a JBOD with the <b class="Sy" title="Sy">sas_direct</b> topology while
      naming an internal L2ARC device with an alias.
    <div class="Pp"></div>
    <var class="Ar" title="Ar">name</var> is the name of the link to the device
      that will by created under
      <span class="Pa" title="Pa">/dev/disk/by-vdev</span>.
    <div class="Pp"></div>
    <var class="Ar" title="Ar">devlink</var> is the name of the device link that
      has already been defined by udev. This may be an absolute path or the base
      filename.</dd>
  <dt><b class="Sy" title="Sy">channel</b>
    [<var class="Ar" title="Ar">pci_slot</var>]
    <var class="Ar" title="Ar">port</var>
    <var class="Ar" title="Ar">name</var></dt>
  <dd>Maps a physical path to a channel name (typically representing a single
      disk enclosure).</dd>
  <dt><b class="Sy" title="Sy">enclosure_symlinks</b>
    <b class="Sy" title="Sy">yes</b>|<b class="Sy" title="Sy">no</b></dt>
  <dd>Additionally create <span class="Pa" title="Pa">/dev/by-enclosure</span>
      symlinks to the disk enclosure <i class="Em" title="Em">sg</i> devices
      using the naming scheme from
      <span class="Pa" title="Pa">vdev_id.conf</span>.
      <b class="Sy" title="Sy">enclosure_symlinks</b> is only allowed for
      <b class="Sy" title="Sy">sas_direct</b> mode.</dd>
  <dt><b class="Sy" title="Sy">enclosure_symlinks_prefix</b>
    <var class="Ar" title="Ar">prefix</var></dt>
  <dd>Specify the prefix for the enclosure symlinks in the form
      <span class="Pa" title="Pa">/dev/by-enclosure/</span>&#x27E8;<var class="Ar" title="Ar">prefix</var>&#x27E9;-&#x27E8;<var class="Ar" title="Ar">channel</var>&#x27E9;&#x27E8;<var class="Ar" title="Ar">num</var>&#x27E9;
    <div class="Pp"></div>
    Defaults to &#x201C;<i class="Em" title="Em">enc</i>&#x201D;.</dd>
  <dt><b class="Sy" title="Sy">slot</b> <var class="Ar" title="Ar">prefix</var>
    <var class="Ar" title="Ar">new</var>
    [<div class="Op"><var class="Ar" title="Ar">channel</var></div>]</dt>
  <dd>Maps a disk slot number as reported by the operating system to an
      alternative slot number. If the <var class="Ar" title="Ar">channel</var>
      parameter is specified then the mapping is only applied to slots in the
      named channel, otherwise the mapping is applied to all channels. The
      first-specified <var class="Ar" title="Ar">slot</var> rule that can match
      a slot takes precedence. Therefore a channel-specific mapping for a given
      slot should generally appear before a generic mapping for the same slot.
      In this way a custom mapping may be applied to a particular channel and a
      default mapping applied to the others.</dd>
  <dt><b class="Sy" title="Sy">multipath</b>
    <b class="Sy" title="Sy">yes</b>|<b class="Sy" title="Sy">no</b></dt>
  <dd>Specifies whether
      <code class="Nm" title="Nm">vdev_id</code><b class="Sy" title="Sy">(8)</b>
      will handle only dm-multipath devices. If set to
      <b class="Sy" title="Sy">yes</b> then
      <code class="Nm" title="Nm">vdev_id</code><b class="Sy" title="Sy">(8)</b>
      will examine the first running component disk of a dm-multipath device as
      provided by the driver command to determine the physical path.</dd>
  <dt><b class="Sy" title="Sy">topology</b>
    <b class="Sy" title="Sy">sas_direct</b>|<b class="Sy" title="Sy">sas_switch</b>|<b class="Sy" title="Sy">scsi</b></dt>
  <dd>Identifies a physical topology that governs how physical paths are mapped
      to channels:
    <dl class="Bl-tag Bl-compact">
      <dt><b class="Sy" title="Sy">sas_direct</b> <span class="No">and</span>
        <b class="Sy" title="Sy">scsi</b></dt>
      <dd>channels are uniquely identified by a PCI slot and HBA port
        number</dd>
      <dt><b class="Sy" title="Sy">sas_switch</b></dt>
      <dd>channels are uniquely identified by a SAS switch port number</dd>
    </dl>
  </dd>
  <dt><b class="Sy" title="Sy">phys_per_port</b>
    <var class="Ar" title="Ar">num</var></dt>
  <dd>Specifies the number of PHY devices associated with a SAS HBA port or SAS
      switch port.
      <code class="Nm" title="Nm">vdev_id</code><b class="Sy" title="Sy">(8)</b>
      internally uses this value to determine which HBA or switch port a device
      is connected to. The default is <b class="Sy" title="Sy">4</b>.</dd>
  <dt><b class="Sy" title="Sy">slot</b>
    <b class="Sy" title="Sy">bay</b>|<b class="Sy" title="Sy">phy</b>|<b class="Sy" title="Sy">port</b>|<b class="Sy" title="Sy">id</b>|<b class="Sy" title="Sy">lun</b>|<b class="Sy" title="Sy">ses</b></dt>
  <dd>Specifies from which element of a SAS identifier the slot number is taken.
      The default is <b class="Sy" title="Sy">bay</b>:
    <dl class="Bl-tag Bl-compact">
      <dt><b class="Sy" title="Sy">bay</b></dt>
      <dd>read the slot number from the bay identifier.</dd>
      <dt><b class="Sy" title="Sy">phy</b></dt>
      <dd>read the slot number from the phy identifier.</dd>
      <dt><b class="Sy" title="Sy">port</b></dt>
      <dd>use the SAS port as the slot number.</dd>
      <dt><b class="Sy" title="Sy">id</b></dt>
      <dd>use the scsi id as the slot number.</dd>
      <dt><b class="Sy" title="Sy">lun</b></dt>
      <dd>use the scsi lun as the slot number.</dd>
      <dt><b class="Sy" title="Sy">ses</b></dt>
      <dd>use the SCSI Enclosure Services (SES) enclosure device slot number, as
          reported by <a class="Xr" title="Xr">sg_ses(8)</a>. Intended for use
          only on systems where <b class="Sy" title="Sy">bay</b> is unsupported,
          noting that <b class="Sy" title="Sy">port</b> and
          <b class="Sy" title="Sy">id</b> may be unstable across disk
          replacement.</dd>
    </dl>
  </dd>
</dl>
<h1 class="Sh" title="Sh" id="FILES"><a class="permalink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag">
  <dt><span class="Pa" title="Pa">/etc/zfs/vdev_id.conf</span></dt>
  <dd>The configuration file for
      <code class="Nm" title="Nm">vdev_id</code><b class="Sy" title="Sy">(8)</b>.</dd>
</dl>
<h1 class="Sh" title="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
A non-multipath configuration with direct-attached SAS enclosures and an
  arbitrary slot re-mapping:
<div class="Pp"></div>
<div class="Bd Bd-indent">
<pre class="Li">
multipath     no 
topology      sas_direct 
phys_per_port 4 
slot          bay 
 
#       PCI_SLOT HBA PORT  CHANNEL NAME 
channel 85:00.0  1         A 
channel 85:00.0  0         B 
channel 86:00.0  1         C 
channel 86:00.0  0         D 
 
# Custom mapping for Channel A 
 
#    Linux      Mapped 
#    Slot       Slot      Channel 
slot 1          7         A 
slot 2          10        A 
slot 3          3         A 
slot 4          6         A 
 
# Default mapping for B, C, and D 
 
slot 1          4 
slot 2          2 
slot 3          1 
slot 4          3
</pre>
</div>
<div class="Pp"></div>
A SAS-switch topology. Note, that the <var class="Ar" title="Ar">channel</var>
  keyword takes only two arguments in this example.
<div class="Pp"></div>
<div class="Bd Bd-indent">
<pre class="Li">
topology      sas_switch 
 
#       SWITCH PORT  CHANNEL NAME 
channel 1            A 
channel 2            B 
channel 3            C 
channel 4            D
</pre>
</div>
<div class="Pp"></div>
A multipath configuration. Note that channel names have multiple definitions -
  one per physical path.
<div class="Pp"></div>
<div class="Bd Bd-indent">
<pre class="Li">
multipath yes 
 
#       PCI_SLOT HBA PORT  CHANNEL NAME 
channel 85:00.0  1         A 
channel 85:00.0  0         B 
channel 86:00.0  1         A 
channel 86:00.0  0         B
</pre>
</div>
<div class="Pp"></div>
A configuration with enclosure_symlinks enabled.
<div class="Pp"></div>
<div class="Bd Bd-indent">
<pre class="Li">
multipath yes 
enclosure_symlinks yes 
 
#          PCI_ID      HBA PORT     CHANNEL NAME 
channel    05:00.0     1            U 
channel    05:00.0     0            L 
channel    06:00.0     1            U 
channel    06:00.0     0            L
</pre>
</div>
<div class="Pp"></div>
In addition to the disks symlinks, this configuration will create:
<div class="Pp"></div>
<div class="Bd Bd-indent">
<pre class="Li">
/dev/by-enclosure/enc-L0 
/dev/by-enclosure/enc-L1 
/dev/by-enclosure/enc-U0 
/dev/by-enclosure/enc-U1
</pre>
</div>
<div class="Pp"></div>
A configuration using device link aliases.
<div class="Pp"></div>
<div class="Bd Bd-indent">
<pre class="Li">
#     by-vdev 
#     name     fully qualified or base name of device link 
alias d1       /dev/disk/by-id/wwn-0x5000c5002de3b9ca 
alias d2       wwn-0x5000c5002def789e
</pre>
</div>
<h1 class="Sh" title="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a href="../8/vdev_id.8.html" class="Xr">vdev_id(8)</a></div>
<table class="foot">
  <tr>
    <td class="foot-date">May 26, 2021</td>
    <td class="foot-os">Debian</td>
  </tr>
</table>
</div></div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="zfs-events.5.html" class="btn btn-neutral float-right" title="zfs-events.5" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="spl-module-parameters.5.html" class="btn btn-neutral float-left" title="spl-module-parameters.5" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, OpenZFS.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>